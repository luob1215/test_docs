"use strict";(self.webpackChunkdeno_docs=self.webpackChunkdeno_docs||[]).push([[4445],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>f});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=o.createContext({}),l=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=l(e.components);return o.createElement(p.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},c=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,p=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),d=l(n),c=r,f=d["".concat(p,".").concat(c)]||d[c]||u[c]||a;return n?o.createElement(f,i(i({ref:t},m),{},{components:n})):o.createElement(f,i({ref:t},m))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=c;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[d]="string"==typeof e?e:r,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}c.displayName="MDXCreateElement"},81311:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var o=n(87462),r=(n(67294),n(3905));const a={},i="Import Maps",s={unversionedId:"manual/basics/import_maps",id:"manual/basics/import_maps",title:"Import Maps",description:'In order for Deno to resolve a bare specifier like "react" or "lodash", it',source:"@site/runtime/manual/basics/import_maps.md",sourceDirName:"manual/basics",slug:"/manual/basics/import_maps",permalink:"/runtime/manual/basics/import_maps",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"runtimeGuideHome",previous:{title:"Standard Library",permalink:"/runtime/manual/basics/standard_library"},next:{title:"Environment variables",permalink:"/runtime/manual/basics/env_variables"}},p={},l=[{value:"Example - Using deno_std&#39;s fmt module via <code>fmt/</code>",id:"example---using-deno_stds-fmt-module-via-fmt",level:2},{value:"Example - Using project root for absolute imports",id:"example---using-project-root-for-absolute-imports",level:2},{value:"Overriding imports",id:"overriding-imports",level:2},{value:"Import Maps are for Applications",id:"import-maps-are-for-applications",level:2}],m={toc:l},d="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,o.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"import-maps"},"Import Maps"),(0,r.kt)("p",null,"In order for Deno to resolve a ",(0,r.kt)("em",{parentName:"p"},"bare specifier")," like ",(0,r.kt)("inlineCode",{parentName:"p"},'"react"')," or ",(0,r.kt)("inlineCode",{parentName:"p"},'"lodash"'),", it\nneeds to be told where to look for it. Does ",(0,r.kt)("inlineCode",{parentName:"p"},'"lodash"')," refer to an npm module or\ndoes it map to an https URL?"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts,",metastring:"ignore",ignore:!0},'import lodash from "lodash";\n')),(0,r.kt)("p",null,"Node and npm use ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," and the ",(0,r.kt)("inlineCode",{parentName:"p"},"node_modules")," folder to do this\nresolution. Deno, on the other hand, uses the\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/WICG/import-maps"},"import map")," standard."),(0,r.kt)("p",null,"To make the above ",(0,r.kt)("inlineCode",{parentName:"p"},'import lodash from "lodash"')," work, add the following to the\n",(0,r.kt)("a",{parentName:"p",href:"/runtime/manual/getting_started/configuration_file"},(0,r.kt)("inlineCode",{parentName:"a"},"deno.json")," configuration file"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "imports": {\n    "lodash": "https://esm.sh/lodash@4.17.21"\n  }\n}\n')),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"deno.json")," file is auto-discovered and acts (among other things) as an\nimport map.\n",(0,r.kt)("a",{parentName:"p",href:"/runtime/manual/getting_started/configuration_file"},"Read more about ",(0,r.kt)("inlineCode",{parentName:"a"},"deno.json")," here"),"."),(0,r.kt)("p",null,"This also works with npm specifiers. Instead of the above, we could have also\nwritten something similar in our ",(0,r.kt)("inlineCode",{parentName:"p"},"deno.json")," configuration file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "imports": {\n    "lodash": "npm:lodash@^4.17"\n  }\n}\n')),(0,r.kt)("h2",{id:"example---using-deno_stds-fmt-module-via-fmt"},"Example - Using deno_std's fmt module via ",(0,r.kt)("inlineCode",{parentName:"h2"},"fmt/")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="deno.json"',title:'"deno.json"'},'{\n  "imports": {\n    "fmt/": "https://deno.land/std@0.208.0/fmt/"\n  }\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="color.ts"',title:'"color.ts"'},'import { red } from "fmt/colors.ts";\n\nconsole.log(red("hello world"));\n')),(0,r.kt)("h2",{id:"example---using-project-root-for-absolute-imports"},"Example - Using project root for absolute imports"),(0,r.kt)("p",null,"To use your project root for absolute imports:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="deno.json"',title:'"deno.json"'},'{\n  "imports": {\n    "/": "./",\n    "./": "./"\n  }\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="main.ts"',title:'"main.ts"'},'import { MyUtil } from "/util.ts";\n')),(0,r.kt)("p",null,"This causes import specifiers starting with ",(0,r.kt)("inlineCode",{parentName:"p"},"/")," to be resolved relative to the\nimport map's URL or file path."),(0,r.kt)("h2",{id:"overriding-imports"},"Overriding imports"),(0,r.kt)("p",null,"The other situation where import maps can be very useful is to override imports\nin specific modules."),(0,r.kt)("p",null,"Let's say you want to override the deno_std import from 0.177.0 to the latest in\nall of your imported modules, but for the ",(0,r.kt)("inlineCode",{parentName:"p"},"https://deno.land/x/example/")," module\nyou want to use files in a local ",(0,r.kt)("inlineCode",{parentName:"p"},"patched")," directory. You can do this by using a\nscope in the import map that looks something like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "imports": {\n    "https://deno.land/std@0.177.0/": "https://deno.land/std@0.208.0/"\n  },\n  "scopes": {\n    "https://deno.land/x/example/": {\n      "https://deno.land/std@0.177.0/": "./patched/"\n    }\n  }\n}\n')),(0,r.kt)("h2",{id:"import-maps-are-for-applications"},"Import Maps are for Applications"),(0,r.kt)("p",null,"It is important to note that import map configuration files are\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/WICG/import-maps#scope"},"only applied for Deno applications"),", not in the various libraries that\nyour application code may import. This lets you, the application author, have\nfinal say about what versions of libraries get included in your project."),(0,r.kt)("p",null,"If you are developing a library, you should instead prefer to use the ",(0,r.kt)("inlineCode",{parentName:"p"},"deps.ts"),"\npattern discussed in ",(0,r.kt)("a",{parentName:"p",href:"/runtime/tutorials/manage_dependencies"},"Managing Dependencies"),"."))}u.isMDXComponent=!0}}]);